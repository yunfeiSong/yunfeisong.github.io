function snowFall(t){this.maxFlake=(t=t||{}).maxFlake||40,this.flakeSize=t.flakeSize||10,this.fallSpeed=t.fallSpeed||1,this.animationId=null}function snowCanvas(){var t=document.createElement("canvas"),i=(t.id="snowfall",t.width=window.innerWidth,t.height=window.innerHeight,t.setAttribute("style","position:fixed; top: 0; left: 0; z-index: 0; pointer-events: none;"),document.body.appendChild(t),this.canvas=t,this.ctx=t.getContext("2d"),this);window.onresize=function(){t.width=window.innerWidth,t.height=window.innerHeight,i.canvas=t}}function flakeMove(t,i,e,a){this.x=Math.floor(Math.random()*t),this.y=Math.floor(Math.random()*i),this.size=Math.random()*e+2,this.maxSize=e,this.speed=+Math.random()+a,this.fallSpeed=a,this.velY=this.speed,this.velX=0,this.stepSize=Math.random()/30,this.step=0}function createFlakes(){for(var t=this.maxFlake,i=this.flakes=[],e=this.canvas,a=0;a<t;a++)i.push(new flakeMove(e.width,e.height,this.flakeSize,this.fallSpeed))}function drawSnow(){var t=this.maxFlake,i=this.flakes,e=this.ctx,a=this.canvas,n=this;e.clearRect(0,0,a.width,a.height);for(var s=0;s<t;s++)i[s].update(),i[s].render(e);this.animationId=requestAnimationFrame(function(){drawSnow.apply(n)})}requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(t){clearTimeout(t)},snowFall.prototype.start=function(){snowCanvas.apply(this),createFlakes.apply(this),drawSnow.apply(this)},snowFall.prototype.stop=function(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.canvas&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},flakeMove.prototype.update=function(){this.velX*=.98,this.velY<=this.speed&&(this.velY=this.speed),this.velX+=Math.cos(this.step+=.05)*this.stepSize,this.y+=this.velY,this.x+=this.velX;var t=window.innerWidth,i=window.innerHeight;(this.x>=t||this.x<=0||this.y>=i||this.y<=0)&&this.reset(t,i)},flakeMove.prototype.reset=function(t,i){this.x=Math.floor(Math.random()*t),this.y=-50*Math.random(),this.size=Math.random()*this.maxSize+2,this.speed=+Math.random()+this.fallSpeed,this.velY=this.speed,this.velX=0},flakeMove.prototype.render=function(t){var i=t.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size);i.addColorStop(0,"rgba(255, 255, 255, 0.9)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),t.save(),t.fillStyle=i,t.beginPath(),t.arc(this.x,this.y,this.size,0,2*Math.PI),t.fill(),t.restore()};var snow=new snowFall({maxFlake:40});snow.start();